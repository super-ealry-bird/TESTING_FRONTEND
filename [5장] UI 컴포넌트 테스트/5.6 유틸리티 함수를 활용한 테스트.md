# Chapter 5. UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
### 5.6 ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ í™œìš©í•œ í…ŒìŠ¤íŠ¸
> UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ì—ì„œëŠ” ì‚¬ìš©ì ì…ë ¥(ì¸í„°ë™ì…˜)ì´ ê²€ì¦ì˜ ê¸°ì 
>
> ê·¸ë ‡ë‹¤ë©´ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— í•„ìˆ˜ì¸ í¼ ì…ë ¥ ì¸í„°ë™ì…˜ì„ í•¨ìˆ˜í™”í•˜ì—¬ ì–´ë–»ê²Œ ë‹¤ì‹œ í™œìš©í• ê¹Œ?


<br/>

### 5.6.1 í…ŒìŠ¤íŠ¸í•  UI ì»´í¬ë„ŒíŠ¸
> ë°°ì†¡ì§€ ì •ë³´ë¥¼ ì…ë ¥í•˜ëŠ” í¼
>
> ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ìƒí’ˆ ë°°ì†¡ì§€ë¥¼ ì§€ì •í•˜ëŠ” ìƒí™©ì„ ê°€ì •
> 
>(ì‡¼í•‘ ì´ë ¥ì´ ì—†ëŠ” ì‚¬ìš©ìëŠ” 'ë°°ì†¡ì§€'ë¥¼ ì…ë ¥í•´ì•¼í•˜ê³  ì‡¼í•‘ ì´ë ¥ì´ ìˆëŠ” ì‚¬ìš©ìëŠ” 'ì´ì „ ë°°ì†¡ì§€'ë¥¼ ì„ íƒí•˜ê±°ë‚˜ 'ìƒˆë¡œìš´ ë°°ì†¡ì§€'ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆë‹¤.)

```ts
import { useState } from "react";
import { ContactNumber } from "./ContactNumber";
import { DeliveryAddress } from "./DeliveryAddress";
import { PastDeliveryAddress } from "./PastDeliveryAddress";
import { RegisterDeliveryAddress } from "./RegisterDeliveryAddress";

export type AddressOption = React.ComponentProps<"option"> & { id: string };
export type Props = {
  deliveryAddresses?: AddressOption[];
  onSubmit?: (event: React.FormEvent<HTMLFormElement>) => void;
};
export const Form = (props: Props) => {
  const [registerNew, setRegisterNew] = useState<boolean | undefined>(
    undefined
  );
  return (
    <form onSubmit={props.onSubmit}>
      <h2>ë°°ì†¡ì§€ ì •ë³´ ì…ë ¥</h2>
      <ContactNumber />
      {props.deliveryAddresses?.length ? (
        <>
          <RegisterDeliveryAddress onChange={setRegisterNew} />
          {registerNew ? (
            <DeliveryAddress title="ìƒˆë¡œìš´ ë°°ì†¡ì§€" />
          ) : (
            <PastDeliveryAddress
              disabled={registerNew === undefined}
              options={props.deliveryAddresses}
            />
          )}
        </>
      ) : (
        <DeliveryAddress />
      )}
      <hr />
      <div>
        <button>ì£¼ë¬¸ë‚´ìš© í™•ì¸</button>
      </div>
    </form>
  );
};
```

- ì´ì „ ë°°ì†¡ì§€ê°€ ì—†ìŒ
- ì´ì „ ë°°ì†¡ì§€ê°€ ìˆìŒ > ìƒˆë¡œìš´ ë°°ì†¡ì§€ë¥¼ ë“±ë¡í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì´ì „ ë°°ì†¡ì§€ê°€ ìˆìŒ > ìƒˆë¡œìš´ ë°°ì†¡ì§€ë¥¼ ë“±ë¡

<p align="center">
<img width="499" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-08-13 01 42 40" src="https://github.com/user-attachments/assets/292e0317-5aca-4a61-93ee-a6d819504784">
<p/>
  
<br/>

### 5.6.2 í¼ ì…ë ¥ì„ í•¨ìˆ˜í™”í•˜ê¸°
> íŠ¹íˆ í™”ë©´ ë¶„ê¸°ê°€ ìˆëŠ” ê²½ìš° ì—¬ëŸ¬ ë²ˆ ë™ì¼í•œ ì¸í„°ë™ì…˜ì„ ì‘ì„±í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ì€ë°, ì´ë ‡ê²Œ ë°˜ë³µì ìœ¼ë¡œ í˜¸ì¶œí•´ì•¼ í•˜ëŠ” ì¸í„°ë™ì…˜ì„ í•˜ë‚˜ì˜ í•¨ìˆ˜ë¡œ ì •ë¦¬í•˜ë©´ ì—¬ëŸ¬ê³³ì—ì„œ ë‹¤ì‹œ í™œìš© í•  ìˆ˜ ìˆë‹¤.

<br />

```shell
ì²´í¬ë°•ìŠ¤ í´ë¦­ : checked ìƒíƒœ ë³€ê²½
'íšŒì›ê°€ì…' ë²„íŠ¼ í™œì„±í™” ì—¬ë¶€ ë³€ê²½
await user.click() í˜•ì‹ìœ¼ë¡œ ì¬í˜„
ë²„íŠ¼ì˜ í™œì„±í™” ì—¬ë¶€ ê²€ì¦ : toBeDisabled / toBeEnabled ë§¤ì²˜ ì‚¬ìš©
```

```ts
//ì—°ë½ì²˜ë¥¼ ì…ë ¥í•˜ëŠ” ì¸í„°ë™ì…˜ì„ í•¨ìˆ˜ë¡œ ë§Œë“  ê²ƒ
async function inputContactNumber(
  inputValues = { 
    name: "ë°°ì–¸ìˆ˜",
    phoneNumber: "000-0000-0000",
  }
) {
  await user.type(
    screen.getByRole("textbox", { name: "ì „í™”ë²ˆí˜¸" }),
    inputValues.phoneNumber
  );
  await user.type(
    screen.getByRole("textbox", { name: "ì´ë¦„" }),
    inputValues.name
  );
  return inputValues;
}
```

```ts
//ë°°ì†¡ì§€ë¥¼ ì…ë ¥í•˜ëŠ” ì¸í„°ë™ì…˜ í•¨ìˆ˜
async function inputDeliveryAddress(
  inputValues = {
    postalCode: "16397",
    prefectures: "ê²½ê¸°ë„",
    municipalities: "ìˆ˜ì›ì‹œ ê¶Œì„ êµ¬",
    streetNumber: "ë§¤ê³¡ë¡œ 67",
  }
) {
  await user.type(
    screen.getByRole("textbox", { name: "ìš°í¸ë²ˆí˜¸" }),
    inputValues.postalCode
  );
  await user.type(
    screen.getByRole("textbox", { name: "ì‹œ/ë„" }),
    inputValues.prefectures
  );
  await user.type(
    screen.getByRole("textbox", { name: "ì‹œ/êµ°/êµ¬" }),
    inputValues.municipalities
  );
  await user.type(
    screen.getByRole("textbox", { name: "ë„ë¡œëª…" }),
    inputValues.streetNumber
  );
  return inputValues;
}
```

ğŸ’¡ ì…ë ¥ í•­ëª©ì´ ë§ì€ í¼ì¼ìˆ˜ë¡ í•¨ìˆ˜í™”ê°€ íš¨ê³¼ì ì´ë‹¤. 

<br/>

### 5.6.3 ì´ì „ ë°°ì†¡ì§€ê°€ ì—†ëŠ” ê²½ìš°ì˜ í…ŒìŠ¤íŠ¸
> ë°°ì†¡ì§€ê°€ ì—†ëŠ” ê²½ìš°ì˜ í…ŒìŠ¤íŠ¸ ì‘ì„±

'Form' ì»´í¬ë„ŒíŠ¸ì— ì´ì „ ë°°ì†¡ì§€ë¥¼ ì˜ë¯¸í•˜ëŠ” 'deliveryAddress' ë¼ëŠ” Props ì§€ì •
```ts
export type Props = {
  deliveryAddresses?: AddressOption[];
  onSubmit?: (event: React.FormEvent<HTMLFormElement>) => void;
};
```

> ë§Œì•½, ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ì´ì „ ë°°ì†¡ì§€ê°€ ì—†ëŠ” ìƒíƒœì´ê¸°ì— ì…ë ¥ì„ ë°›ê¸° ìœ„í•´ ì…ë ¥ë€ì´ ì¡´ì¬í•˜ëŠ”ì§€ ê²€ì¦í•œë‹¤.

```ts
describe("ì´ì „ ë°°ì†¡ì§€ê°€ ì—†ëŠ” ê²½ìš°", () => {
  test("ë°°ì†¡ì§€ ì…ë ¥ë€ì´ ì¡´ì¬í•œë‹¤", () => {
    render(<Form />);
    expect(screen.getByRole("group", { name: "ì—°ë½ì²˜" })).toBeInTheDocument();
    expect(screen.getByRole("group", { name: "ë°°ì†¡ì§€" })).toBeInTheDocument();
  });
});
```

> ì•ì„œ ì¤€ë¹„í•œ ì¸í„°ë™ì…˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì…ë ¥ì´ í•„ìš”í•œ í¼ ì±„ìš°ê¸°

```ts
describe("ì´ì „ ë°°ì†¡ì§€ê°€ ì—†ëŠ” ê²½ìš°", () => {
  test("í¼ì„ ì œì¶œí•˜ë©´ ì…ë ¥ ë‚´ìš©ì„ ì „ë‹¬ë°›ëŠ”ë‹¤", async () => {
    const [mockFn, onSubmit] = mockHandleSubmit();
    render(<Form onSubmit={onSubmit} />);
//ì•ì„œ ì¤€ë¹„í•œ ì¸í„°ë™ì…˜ í•¨ìˆ˜ ì‚¬ìš© ë¶€ë¶„
    const contactNumber = await inputContactNumber();
    const deliveryAddress = await inputDeliveryAddress();
    await clickSubmit();
//ìŠ¤í”„ë ˆë“œ ì—°ì‚°ìë¡œ í•©ì³ ì…ë ¥ ë‚´ìš©ì„ ì œëŒ€ë¡œ ì „ë‹¬ë°›ì•˜ëŠ”ì§€ ê²€ì¦
    expect(mockFn).toHaveBeenCalledWith(
      expect.objectContaining({ ...contactNumber, ...deliveryAddress })
    );
  });
});
```
<br/>

ğŸ’¬ `clickSubmit()` ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ ë‹¤ë£¨ì§€ëŠ” ì•Šì§€ë§Œ ìœ ì¶”í•  ìˆ˜ ìˆë‹¤!

<br/>

**[ Form ì´ë²¤íŠ¸ë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•œ ëª© í•¨ìˆ˜ ]**

> onSubmit ìœ¼ë¡œ ì „ë‹¬ë°›ì€ ê°’ì„ ê²€ì¦í•  ë•ŒëŠ” ëª© í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

<br />

```shell
mockHandleSubmit í•¨ìˆ˜ëŠ” ( ìŠ¤íŒŒì´ + ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ )  ì¡°í•©ìœ¼ë¡œ ì‘ì„±í•œë‹¤.
```

```ts
function mockHandleSubmit() {
  const mockFn = jest.fn(); //ìŠ¤íŒŒì´
//ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
  const onSubmit = (event: React.FormEvent<HTMLFormElement>) => {
    event.preventDefault();
    const formData = new FormData(event.currentTarget);
    const data: { [k: string]: unknown } = {};
    formData.forEach((value, key) => (data[key] = value));
    mockFn(data);
  };
  return [mockFn, onSubmit] as const;
}
```

<br/>


### 5.6.4 ì´ì „ ë°°ì†¡ì§€ê°€ ìˆëŠ” ê²½ìš°ì˜ í…ŒìŠ¤íŠ¸
> ì´ì „ ë°°ì†¡ì§€ê°€ ìˆëŠ” ê²½ìš°ì˜ í…ŒìŠ¤íŠ¸ ì‘ì„±

'Form' ì»´í¬ë„ŒíŠ¸ì— ì´ì „ ë°°ì†¡ì§€ë¥¼ ì˜ë¯¸í•˜ëŠ” 'deliveryAddress' ì— ê°ì²´ë¥¼ í• ë‹¹í•˜ì—¬ ìƒí™©ì„ ì¬í˜„í•œë‹¤.

```shell
ìƒˆë¡œìš´ ë°°ì†¡ì§€ë¥¼ ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì˜ˆ / ì•„ë‹ˆì˜¤ (ì„ íƒí•˜ê¸° ì „ê¹Œì§€ ì´ì „ ë°°ì†¡ì§€ê°€ ì íŒ ì…€ë ‰íŠ¸ë°•ìŠ¤ëŠ” ë¹„í™œì„±í™”ëœë‹¤.)
```
```ts
describe("ì´ì „ ë°°ì†¡ì§€ê°€ ìˆëŠ” ê²½ìš°", () => {
  test("ì§ˆë¬¸ì— ëŒ€ë‹µí•  ë•Œê¹Œì§€ ë°°ì†¡ì§€ë¥¼ ì„ íƒí•  ìˆ˜ ì—†ë‹¤", () => {
    render(<Form deliveryAddresses={deliveryAddresses} />);
    expect(
      screen.getByRole("group", { name: "ìƒˆë¡œìš´ ë°°ì†¡ì§€ë¥¼ ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?" })
    ).toBeInTheDocument();
    expect(
      screen.getByRole("group", { name: "ì´ì „ ë°°ì†¡ì§€" })
    ).toBeDisabled();
  });
});
```
<br/>

**[ 'ì•„ë‹ˆì˜¤'ë¥¼ ì„ íƒí•œ ê²½ìš°ì˜ ì „ì†¡ ë‚´ìš© ê²€ì¦ ]**

> 'ì•„ë‹ˆì˜¤'ë¥¼ ì„ íƒí•˜ë©´ inputDeliveryAddress ëŠ” í•„ìš”ì—†ë‹¤.

```shell
InputContactNumberë§Œ ì‹¤í–‰í•´ ì…ë ¥ ë‚´ìš©ì´ ì „ì†¡ëëŠ”ì§€ ê²€ì¦í•´ë³¸ë‹¤.
```

```ts
describe("ì´ì „ ë°°ì†¡ì§€ê°€ ìˆëŠ” ê²½ìš°", () => {
  test("'ì•„ë‹ˆì˜¤'ë¥¼ ì„ íƒí•˜ê³  ì œì¶œí•˜ë©´ ì…ë ¥ ë‚´ìš©ì„ ì „ë‹¬ë°›ëŠ”ë‹¤", async () => {
    const [mockFn, onSubmit] = mockHandleSubmit();
    render(<Form deliveryAddresses={deliveryAddresses} onSubmit={onSubmit} />);
    await user.click(screen.getByLabelText("ì•„ë‹ˆì˜¤"));
    expect(
      screen.getByRole("group", { name: "ì´ì „ ë°°ì†¡ì§€" })
    ).toBeInTheDocument();
    const inputValues = await inputContactNumber();
    await clickSubmit();
    expect(mockFn).toHaveBeenCalledWith(expect.objectContaining(inputValues));
  });
});
```

<br/>

**[ 'ë„¤'ë¥¼ ì„ íƒí•œ ê²½ìš°ì˜ ì „ì†¡ ë‚´ìš© ê²€ì¦ ]**

> 'ë„¤'ë¥¼ ì„ íƒí•˜ë©´ inputDeliveryAddress ê°€ í•„ìš”í•˜ë‹¤.

```shell
ì´ì „ ë°°ì†¡ì§€ê°€ ì—†ëŠ” ê²½ìš°ì™€ ë™ì¼í•˜ê²Œ ëª¨ë“  ì…ë ¥ í•­ëª©ì„ ì…ë ¥í•œ í›„ ê²€í† í•œë‹¤.
```

```ts
describe("ì´ì „ ë°°ì†¡ì§€ê°€ ìˆëŠ” ê²½ìš°", () => {
   test("'ë„¤'ë¥¼ ì„ íƒí•˜ê³  ì œì¶œí•˜ë©´ ì…ë ¥ ë‚´ìš©ì„ ì „ë‹¬ë°›ëŠ”ë‹¤", async () => {
    const [mockFn, onSubmit] = mockHandleSubmit();
    render(<Form deliveryAddresses={deliveryAddresses} onSubmit={onSubmit} />);
    await user.click(screen.getByLabelText("ë„¤"));
    expect(
      screen.getByRole("group", { name: "ìƒˆë¡œìš´ ë°°ì†¡ì§€" })
    ).toBeInTheDocument();
    const contactNumber = await inputContactNumber();
    const deliveryAddress = await inputDeliveryAddress();
    await clickSubmit();
    expect(mockFn).toHaveBeenCalledWith(
      expect.objectContaining({ ...contactNumber, ...deliveryAddress })
    );
  });
});
```









