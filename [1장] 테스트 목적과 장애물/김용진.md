# [1장] 테스트 목적과 장애물

---

## 1.1 이 책의 구성
- 중반부까지는 단위 테스트만 실시한다. 
  [Github](https://github.com/frontend-testing-book-kr/unittest)
- 후반부에서는 Next.js 프레임워크를 사용한 애플리케이션이다. 목적에 맞게끔 애플리케이션 기능은 너무 복잡하지 않게 만들었다.
  [Github](https://github.com/frontend-testing-book-kr/nextjs)

### 1.1.1 다양한 테스트 방법
언제, 어떤 테스트를 실시해야 하는지도 알아본다.

#### [1] 함수 단위 테스트
함수마다 단위 테스트를 작성하며, 테스트 자동화 방법까지 배워본다.

#### [2] UI 컴포넌트와 단위 테스트
웹 접근성 품질까지 단위 테스트로 검증할 수 있는 환경이 갖춰졌다.

#### [3] UI 컴포넌트와 통합 테스트
비동기 처리를 하고, 비동기 응답이 오면 화면을 갱신한다. 통합 테스트는 이와 같은 외부 요인을 포함한 테스트다.

#### [4] UI 컴포넌트와 시각적 회귀 테스트
CSS가 적용된 출력 결과를 검증하려면 시작적 회귀 테스트가 필요하다.

#### [5] E2E 테스트
헤드리스 브라우저로 E2E 테스트. 데이터베이스, 외부 스토리지에 접속한다. E2E 테스트는 실제 애플리케이션에 가깝게 상황을 재현해 테스트를 실시한다.

> 💡 **헤드리스 브라우저**
> 
> GUI(Graphical User Interface)을 제공하지 않는 브라우저이다.

---

### 1.1.2 라이브러리
테스팅 라이브러리로 작성한 테스트 코드는 UI 컴포넌트 라이브러리가 변경되어도 대부분 그대로 사용할 수 있다.

#### [1] 타입스크립트
타입스크립트는 자바스크립트의 단점 때문에 발생하던 품질 문제가 해결되고 있다.

#### [2] 프런트엔드 라이브러리 및 프레임웤,

> - 리액트<small>React</small>: UI 컴포넌트 라이브러리
> - Zod: 유효성 검사 라이브러리
> - React Hook Form: 리액트에서 폼을 쉽게 다루게 해주는 라이브러리
> - Next.js: 리액트를 기반으로 만든 웹 애플리케이션 프레임워크
> - 프리즈마<small>Prisma</small>: 데이터베이스에 접속하는 객체 관계 매핑 라이브러리

#### [3] 테스트 프레임워크 및 도구

> - 제스트<small>Jest</small>: 명령줄 인터페이스 기반 테스트 프레임워크 및 테스트 실행기
> - 플레이라이트: 헤드리스 브라우저를 포함한 테스트 프레임워크 및 테스트 실횅기
> - reg-suit: 시각적 회귀 테스트 프레임워크
> - 스토리북: UI 컴포넌트 탐색기

---

## 1.2 테스트를 작성해야 하는 이유
테스트가 왜 필요한지 깨닫는 데는 많은 시간이 필요하다. 테스트 작성이 왜 필요한지 살펴보자.

### 1.2.1 사업의 신뢰성
테스트 코드가 버그를 조기에 발견해 서비스 이미지를 지켜주는 역할을 한다.

프런트엔드 개발자가 BFF 개발에 참여하는 일이 많아졌다. BFF는 인증, 인가와 같이 보안 기능을 주로 담당하며, 테스트 코드로 보안상 치명적인 버그를 사전에 발견할 수 있다.

### 1.2.2 높은 유지보수성
테스트 코드가 없으면 불안감에 리팩터링을 시작하기 어렵다.
![image](https://github.com/user-attachments/assets/b8aa7652-3e53-4941-8297-5c7cf7184e17) <br>
(출처: 제이펍 jpub.kr)

> 라이브러리를 업데이트할 때도 코드를 수정해야 한다. **디펜다봇**을 사용하면 의존하는 라이브러리가 업데이트됐을 때 발생할 수 있는 취약성을 자동으로 검사해 준다.
 
### 1.2.3 코드 품질 향상
테스트 코드 작성이 어렵다면 해당 코드가 너무 많은 역할을 한다는 신호일 수 있다. 하나의 책임만 가지도록 분리하여 구현해야 책임을 파악하기 쉽고, 테스트 작성도 쉬워진다.

테스트 코드를 같이 작성하면 구현 코드를 반추하게 되어 코드 품질이 향상된다.

### 1.2.4 원활한 협업
테스트 코드는 문서보다 우수한 사양서다. 구현 코드나 문서를 읽지 않고 테스트 코드만으로 사양서대로 구현됐는지 확인할 수도 있어 개발자간 협력이 원활하도록 돕는다.

### 1.2.5 회귀 테스트 줄이기
모듈 간 의존관계가 생기고, 의존 중인 모듈이 변경 됐을 때 미치는 영향을 검증하고자 회귀 테스트를 해야한다. 테스트 자동화는 회귀 테스트를 줄이는 최적의 방법이다.

---

## 1.3 테스트 작성의 장벽

- 작성하는 습관
- 시간 부족

### 1.3.1 어려운 테스트 방법
모든 테스트를 해보는 것은 어렵다. 참고할 수 있는 테스트 코드가 많을 수록 테스트 코드 작성이 쉽다.

### 1.3.2 테스트 작성 시간의 부족
테스트 코드를 같이 커밋하려면 작업량이 많아진 만큼 충분한 시간이 필요하다.

### 1.3.3 테스트를 작성하면 시간이 절약되는 이유
테스트 코드는 장기적인 관점에서 시간이 절약된다.
![image](https://github.com/user-attachments/assets/ab496333-d730-42f1-b415-e0de4f45350c)<br>
(출처: 제이펍 jpub.kr)

### 1.3.4 팀원들을 설득하는 방법
방침을 바꾸는 것이 매우 어렵다. 설득하려면 참고할 수 있는 테스트 코드가 있어야 한다.
